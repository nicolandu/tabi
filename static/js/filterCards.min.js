document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelectorAll(".card");const l=document.querySelectorAll(".filter-controls a");const e=document.querySelector("#all-projects-filter");if(!t.length||!l.length)return;e.style.display="block";l.forEach(t=>{const e=t.getAttribute("href");if(e){const n=e.split("/").filter(Boolean).pop();t.setAttribute("href",`#${n}`)}});const i=new Map(Array.from(l).map(t=>[t.dataset.filter,t]));const c=Array.from(t).map(t=>({element:t,tags:t.dataset.tags?.toLowerCase().split(",").filter(Boolean)??[]}));function n(t){return t?decodeURIComponent(t.slice(1)):""}function r(){if(!window.location.hash)return"all";const e=n(window.location.hash);const t=Array.from(l).find(t=>t.getAttribute("href")===`#${e}`);return t?.dataset.filter??"all"}function s(r,t=true){if(t){if(r==="all"){history.pushState(null,"",window.location.pathname)}else{const a=i.get(r);if(a){const o=a.getAttribute("href");history.pushState(null,"",o)}}}const e=r==="all";const n=e?"":"none";const s=e?"false":"true";requestAnimationFrame(()=>{l.forEach(t=>{const e=t.dataset.filter===r;t.classList.toggle("active",e);t.setAttribute("aria-pressed",e)});if(e){c.forEach(({element:t})=>{t.style.display=n;t.setAttribute("aria-hidden",s)})}else{c.forEach(({element:t,tags:e})=>{const n=e.includes(r);t.style.display=n?"":"none";t.setAttribute("aria-hidden",!n)})}})}const a=l[0].parentElement.parentElement;a.addEventListener("click",t=>{const e=t.target.closest("a");if(!e)return;t.preventDefault();const n=e.dataset.filter;if(n)s(n)});a.addEventListener("keydown",t=>{const e=t.target.closest("a");if(!e)return;if(t.key===" "||t.key==="Enter"){t.preventDefault();e.click()}});l.forEach(t=>{t.setAttribute("role","button");t.setAttribute("aria-pressed",t.classList.contains("active"))});window.addEventListener("popstate",()=>{s(r(),false)});const o=r();if(o!=="all"){s(o,false)}});