const themeSwitcher=document.querySelector(".theme-switcher");const themeResetter=document.querySelector(".theme-resetter");const defaultTheme=document.documentElement.getAttribute("data-default-theme");function getSystemThemePreference(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}let currentTheme=localStorage.getItem("theme")||document.documentElement.getAttribute("data-theme")||getSystemThemePreference();function setTheme(e,t=false){document.documentElement.setAttribute("data-theme",e);currentTheme=e;themeSwitcher.setAttribute("aria-pressed",e==="dark");if(t){localStorage.setItem("theme",e);themeResetter.classList.add("has-custom-theme")}else{localStorage.removeItem("theme");themeResetter.classList.remove("has-custom-theme")}window.dispatchEvent(new CustomEvent("themeChanged",{detail:{theme:e}}))}function resetTheme(){setTheme(defaultTheme||getSystemThemePreference())}function switchTheme(){setTheme(currentTheme==="dark"?"light":"dark",true)}themeSwitcher.addEventListener("click",switchTheme);themeResetter.addEventListener("click",resetTheme);if(!defaultTheme){window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{setTheme(e.matches?"dark":"light");document.getElementById("favicon-svg").href=e.matches?"/favicon-dark.svg":"/favicon.svg"})}themeSwitcher.setAttribute("aria-pressed",currentTheme==="dark");if(localStorage.getItem("theme")){themeResetter.classList.add("has-custom-theme")}function handleThemeTogglerKeydown(e){if(e.key==="Enter"||e.key===" "){e.preventDefault();if(e.target===themeSwitcher){switchTheme()}else if(e.target===themeResetter){resetTheme()}}}themeSwitcher.addEventListener("keydown",handleThemeTogglerKeydown);themeResetter.addEventListener("keydown",handleThemeTogglerKeydown);